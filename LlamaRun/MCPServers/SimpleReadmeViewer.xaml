<?xml version="1.0" encoding="utf-8"?>
<UserControl
    x:Class="LlamaRun.MCPServers.ReadmeViewer"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:LlamaRun.MCPServers"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <UserControl.Resources>
        <Style x:Key="LoadingStyle" TargetType="StackPanel">
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>

        <Style x:Key="ModernScrollViewer" TargetType="ScrollViewer">
            <Setter Property="VerticalScrollBarVisibility" Value="Hidden"/>
            <Setter Property="HorizontalScrollBarVisibility" Value="Disabled"/>
            <Setter Property="ZoomMode" Value="Disabled"/>
            <Setter Property="VerticalScrollMode" Value="Enabled"/>
            <Setter Property="HorizontalScrollMode" Value="Disabled"/>
        </Style>

    </UserControl.Resources>

    <Grid>
        <!-- Loading State -->
        <StackPanel x:Name="LoadingPanel" 
                    Style="{StaticResource LoadingStyle}"
                    Visibility="Collapsed">
            <ProgressRing Width="40" Height="40" IsActive="True"/>
            <TextBlock Text="Loading documentation..." 
                       Margin="0,16,0,0"
                       FontSize="14"
                       Foreground="#CCCCCC"
                       HorizontalAlignment="Center"/>
        </StackPanel>

        <!-- WebView with Modern Styling -->
        <Border CornerRadius="8">
            <ScrollViewer Style="{StaticResource ModernScrollViewer}">
                <WebView2 x:Name="ReadmeWebView"
                      DefaultBackgroundColor="Transparent"
                      NavigationStarting="ReadmeWebView_NavigationStarting"
                      NavigationCompleted="ReadmeWebView_NavigationCompleted"/>
            </ScrollViewer>
        </Border>

        <!-- Error State -->
        <StackPanel x:Name="ErrorPanel" 
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Visibility="Collapsed">
            <FontIcon Glyph="&#xE783;" 
                      FontSize="48" 
                      Foreground="#FF6B6B"
                      HorizontalAlignment="Center"/>
            <TextBlock Text="Failed to load documentation" 
                       Margin="0,16,0,8"
                       FontSize="16"
                       FontWeight="SemiBold"
                       Foreground="#FFFFFF"
                       HorizontalAlignment="Center"/>
            <TextBlock Text="Please check your connection and try again" 
                       FontSize="14"
                       Foreground="#CCCCCC"
                       HorizontalAlignment="Center"/>
            <Button Content="Retry" 
                    Margin="0,16,0,0"
                    Background="#0078D4"
                    Foreground="White"
                    BorderThickness="0"
                    CornerRadius="4"
                    Padding="16,8"
                    Click="RetryButton_Click"/>
        </StackPanel>
    </Grid>
</UserControl>